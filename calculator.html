<!-- index.html -->

<!DOCTYPE html >

<html>

  <head>

    <meta charset="utf-8"/>

    <link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/pure/2.0.3/pure-min.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>

    
<!--
    Brython 3.10 is out, but lets wait a bit because of silly arithmetics error
     https://github.com/brython-dev/brython/issues/1819
-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.9.4/brython.min.js">  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.9.4/brython_stdlib.min.js"> </script>


    <script type="text/python" >
    
from browser import document, prompt, html, alert, window
from math import *  # for sin, log, etc functions to be available
import turtle  # forgets what was drawn -- raphael better in this case
# ~ turtle.set_defaults(
    # ~ canvwidth = 650,
    # ~ canvheight = 650,
    # ~ turtle_canvas_wrapper = document['turtle-div'],
# ~ )
turtle.bgcolor("rgb(255, 245, 230)")
t = turtle.Turtle()
t.goto(10, 20)

# ~ paper = window.Raphael(110, 500, 320, 200)  # raphael initialization


def compute(event):

	x = int(document["x"].value)  # otherwise input is `str` type
	if not x:
		alert("You need to enter 'x' value")
		return

	function_code = document["function"].value
	result = eval(function_code)
	
	display_table(x, result)
	display_chart(x, result)

	# document["x"].value = ""  # clear input


def display_table(x, result):
	table = document['output']
	cells = html.TD(x) + html.TD(result)  # "+" is  brython way to join elements
	table <= html.TR(cells)  # "<="  special brython operator to insert element (tr into table)


def display_chart(x, y):
	# ~ turtle.goto(int(x), int(result))
	# ~ x, y = int(x), int(result)
	# ~ paper.circle(x, y, 5).attr("fill", "#00f")
	t.goto(x, y)
	turtle.done()



document["submit"].bind("click", compute)


    </script>

    <style>body { padding: 30px; }</style>

  </head>

  
  
  
  <body onload="brython({debug:1})" defer>

	<h1>Calculator</h1>

	f(x): <input type="text" id="function" placeholder="function" value="2**x"/> 
	<br />
	
	x: <input type="number" step=1 id="x" placeholder="x" value="4"/>

	<button type="submit" id="submit">Ok</button>
	
	<hr>

    <table id="output" class="pure-table">
		<thead><tr><th>x</th><th>result</th></tr></thead>
    </table>
	
<!--
	<div id="turtle-div"  style="float:left;border:1px solid green; margin-left:50px;"></div>
-->
  </body>
 
</html>
